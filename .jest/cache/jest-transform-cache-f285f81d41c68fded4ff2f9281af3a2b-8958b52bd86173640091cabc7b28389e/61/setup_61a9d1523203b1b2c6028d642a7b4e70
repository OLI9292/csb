60631c4565ca76cda1728cc33213c25f
/**
 * Copyright (c) 2015-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';

jest.mock('setupDevtools').mock('npmlog'); // there's a __mock__ for it.

jest.mock('InitializeCore', () => {}).mock('Image', () => mockComponent('Image')).mock('Text', () => mockComponent('Text')).mock('TextInput', () => mockComponent('TextInput')).mock('Modal', () => mockComponent('Modal')).mock('View', () => mockComponent('View')).mock('RefreshControl', () => require.requireMock('RefreshControlMock')).mock('ScrollView', () => require.requireMock('ScrollViewMock')).mock('ActivityIndicator', () => mockComponent('ActivityIndicator')).mock('ListView', () => require.requireMock('ListViewMock')).mock('ListViewDataSource', () => {
  const DataSource = require.requireActual('ListViewDataSource');

  DataSource.prototype.toJSON = function () {
    function ListViewDataSource(dataBlob) {
      this.items = 0; // Ensure this doesn't throw.

      try {
        Object.keys(dataBlob).forEach(key => {
          this.items += dataBlob[key] && (dataBlob[key].length || dataBlob[key].size || 0);
        });
      } catch (e) {
        this.items = 'unknown';
      }
    }

    return new ListViewDataSource(this._dataBlob);
  };

  return DataSource;
}).mock('AnimatedImplementation', () => {
  const AnimatedImplementation = require.requireActual('AnimatedImplementation');

  const oldCreate = AnimatedImplementation.createAnimatedComponent;

  AnimatedImplementation.createAnimatedComponent = function (Component) {
    const Wrapped = oldCreate(Component);
    Wrapped.__skipSetNativeProps_FOR_TESTS_ONLY = true;
    return Wrapped;
  };

  return AnimatedImplementation;
}).mock('ReactNative', () => {
  const ReactNative = require.requireActual('ReactNative');

  const NativeMethodsMixin = ReactNative.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.NativeMethodsMixin;

  const mockFunction = key => {
    let warned = false;
    return function () {
      if (warned) {
        return;
      }

      warned = true;
      console.warn('Calling .' + key + '() in the test renderer environment is not ' + 'supported. Instead, mock out your components that use ' + 'findNodeHandle with replacements that don\'t rely on the ' + 'native environment.');
    };
  };

  ['measure', 'measureInWindow', 'measureLayout', 'setNativeProps', 'focus', 'blur'].forEach(key => {
    NativeMethodsMixin[key] = mockFunction(key);
    ReactNative.NativeComponent.prototype[key] = mockFunction(key);
  });
  return ReactNative;
}).mock('ensureComponentIsNative', () => () => true);

const mockComponent = require.requireActual('./mockComponent');

require.requireActual('../Libraries/polyfills/babelHelpers.js');

require.requireActual('../Libraries/polyfills/Object.es7.js');

require.requireActual('../Libraries/polyfills/error-guard');

global.__DEV__ = true;
global.Promise = require.requireActual('promise');
global.regeneratorRuntime = require.requireActual('regenerator-runtime/runtime');

global.requestAnimationFrame = function (callback) {
  return setTimeout(callback, 0);
};

global.cancelAnimationFrame = function (id) {
  clearTimeout(id);
};

jest.setMock('ErrorUtils', require('ErrorUtils'));
const mockEmptyObject = {};
const mockNativeModules = {
  AlertManager: {
    alertWithArgs: jest.fn()
  },
  AppState: {
    addEventListener: jest.fn(),
    removeEventListener: jest.fn()
  },
  AsyncLocalStorage: {
    multiGet: jest.fn((keys, callback) => process.nextTick(() => callback(null, []))),
    multiSet: jest.fn((entries, callback) => process.nextTick(() => callback(null))),
    multiRemove: jest.fn((keys, callback) => process.nextTick(() => callback(null))),
    multiMerge: jest.fn((entries, callback) => process.nextTick(() => callback(null))),
    clear: jest.fn(callback => process.nextTick(() => callback(null))),
    getAllKeys: jest.fn(callback => process.nextTick(() => callback(null, [])))
  },
  BuildInfo: {
    appVersion: '0',
    buildVersion: '0'
  },
  Clipboard: {
    setString: jest.fn()
  },
  DataManager: {
    queryData: jest.fn()
  },
  DeviceInfo: {
    Dimensions: {
      window: {
        fontScale: 2,
        height: 1334,
        scale: 2,
        width: 750
      },
      screen: {
        fontScale: 2,
        height: 1334,
        scale: 2,
        width: 750
      }
    }
  },
  FacebookSDK: {
    login: jest.fn(),
    logout: jest.fn(),
    queryGraphPath: jest.fn((path, method, params, callback) => callback())
  },
  FbRelayNativeAdapter: {
    updateCLC: jest.fn()
  },
  GraphPhotoUpload: {
    upload: jest.fn()
  },
  I18n: {
    translationsDictionary: JSON.stringify({
      'Good bye, {name}!|Bye message': '\u{00A1}Adi\u{00F3}s {name}!'
    })
  },
  ImageLoader: {
    getSize: jest.fn(url => Promise.resolve({
      width: 320,
      height: 240
    })),
    prefetchImage: jest.fn()
  },
  ImageViewManager: {
    getSize: jest.fn((uri, success) => process.nextTick(() => success(320, 240))),
    prefetchImage: jest.fn()
  },
  KeyboardObserver: {
    addListener: jest.fn(),
    removeListeners: jest.fn()
  },
  Linking: {
    openURL: jest.fn(),
    canOpenURL: jest.fn(() => Promise.resolve(true)),
    addEventListener: jest.fn(),
    getInitialURL: jest.fn(() => Promise.resolve()),
    removeEventListener: jest.fn()
  },
  LocationObserver: {
    getCurrentPosition: jest.fn(),
    startObserving: jest.fn(),
    stopObserving: jest.fn()
  },
  ModalFullscreenViewManager: {},
  NetInfo: {
    fetch: jest.fn(() => Promise.resolve()),
    getConnectionInfo: jest.fn(() => Promise.resolve()),
    addEventListener: jest.fn(),
    removeEventListener: jest.fn(),
    isConnected: {
      fetch: jest.fn(() => Promise.resolve()),
      addEventListener: jest.fn(),
      removeEventListener: jest.fn()
    },
    isConnectionExpensive: jest.fn(() => Promise.resolve())
  },
  Networking: {
    sendRequest: jest.fn(),
    abortRequest: jest.fn(),
    addListener: jest.fn(),
    removeListeners: jest.fn()
  },
  PushNotificationManager: {
    presentLocalNotification: jest.fn(),
    scheduleLocalNotification: jest.fn(),
    cancelAllLocalNotifications: jest.fn(),
    removeAllDeliveredNotifications: jest.fn(),
    getDeliveredNotifications: jest.fn(callback => process.nextTick(() => [])),
    removeDeliveredNotifications: jest.fn(),
    setApplicationIconBadgeNumber: jest.fn(),
    getApplicationIconBadgeNumber: jest.fn(callback => process.nextTick(() => callback(0))),
    cancelLocalNotifications: jest.fn(),
    getScheduledLocalNotifications: jest.fn(callback => process.nextTick(() => callback())),
    requestPermissions: jest.fn(() => Promise.resolve({
      alert: true,
      badge: true,
      sound: true
    })),
    abandonPermissions: jest.fn(),
    checkPermissions: jest.fn(callback => process.nextTick(() => callback({
      alert: true,
      badge: true,
      sound: true
    }))),
    getInitialNotification: jest.fn(() => Promise.resolve(null)),
    addListener: jest.fn(),
    removeListeners: jest.fn()
  },
  SourceCode: {
    scriptURL: null
  },
  StatusBarManager: {
    setColor: jest.fn(),
    setStyle: jest.fn(),
    setHidden: jest.fn(),
    setNetworkActivityIndicatorVisible: jest.fn(),
    setBackgroundColor: jest.fn(),
    setTranslucent: jest.fn()
  },
  Timing: {
    createTimer: jest.fn(),
    deleteTimer: jest.fn()
  },
  UIManager: {
    AndroidViewPager: {
      Commands: {
        setPage: jest.fn(),
        setPageWithoutAnimation: jest.fn()
      }
    },
    blur: jest.fn(),
    createView: jest.fn(),
    dispatchViewManagerCommand: jest.fn(),
    focus: jest.fn(),
    setChildren: jest.fn(),
    manageChildren: jest.fn(),
    updateView: jest.fn(),
    removeSubviewsFromContainerWithID: jest.fn(),
    replaceExistingNonRootView: jest.fn(),
    customBubblingEventTypes: {},
    customDirectEventTypes: {},
    AndroidTextInput: {
      Commands: {}
    },
    ModalFullscreenView: {
      Constants: {}
    },
    ScrollView: {
      Constants: {}
    },
    View: {
      Constants: {}
    }
  },
  BlobModule: {
    BLOB_URI_SCHEME: 'content',
    BLOB_URI_HOST: null,
    enableBlobSupport: jest.fn(),
    disableBlobSupport: jest.fn(),
    createFromParts: jest.fn(),
    sendBlob: jest.fn(),
    release: jest.fn()
  },
  WebSocketModule: {
    connect: jest.fn(),
    send: jest.fn(),
    sendBinary: jest.fn(),
    ping: jest.fn(),
    close: jest.fn(),
    addListener: jest.fn(),
    removeListeners: jest.fn()
  }
};
Object.keys(mockNativeModules).forEach(module => {
  try {
    jest.doMock(module, () => mockNativeModules[module]); // needed by FacebookSDK-test
  } catch (e) {
    jest.doMock(module, () => mockNativeModules[module], {
      virtual: true
    });
  }
});
jest.doMock('NativeModules', () => mockNativeModules).doMock('ReactNativePropRegistry', () => ({
  register: id => id,
  getByID: () => mockEmptyObject
}));
jest.doMock('requireNativeComponent', () => {
  const React = require('react');

  return viewName => class extends React.Component {
    render() {
      return React.createElement(viewName, this.props, this.props.children);
    }

  };
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNldHVwLmpzIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwibW9ja0NvbXBvbmVudCIsInJlcXVpcmUiLCJyZXF1aXJlTW9jayIsIkRhdGFTb3VyY2UiLCJyZXF1aXJlQWN0dWFsIiwicHJvdG90eXBlIiwidG9KU09OIiwiTGlzdFZpZXdEYXRhU291cmNlIiwiZGF0YUJsb2IiLCJpdGVtcyIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwibGVuZ3RoIiwic2l6ZSIsImUiLCJfZGF0YUJsb2IiLCJBbmltYXRlZEltcGxlbWVudGF0aW9uIiwib2xkQ3JlYXRlIiwiY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQiLCJDb21wb25lbnQiLCJXcmFwcGVkIiwiX19za2lwU2V0TmF0aXZlUHJvcHNfRk9SX1RFU1RTX09OTFkiLCJSZWFjdE5hdGl2ZSIsIk5hdGl2ZU1ldGhvZHNNaXhpbiIsIl9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEIiwibW9ja0Z1bmN0aW9uIiwid2FybmVkIiwiY29uc29sZSIsIndhcm4iLCJOYXRpdmVDb21wb25lbnQiLCJnbG9iYWwiLCJfX0RFVl9fIiwiUHJvbWlzZSIsInJlZ2VuZXJhdG9yUnVudGltZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbGxiYWNrIiwic2V0VGltZW91dCIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiaWQiLCJjbGVhclRpbWVvdXQiLCJzZXRNb2NrIiwibW9ja0VtcHR5T2JqZWN0IiwibW9ja05hdGl2ZU1vZHVsZXMiLCJBbGVydE1hbmFnZXIiLCJhbGVydFdpdGhBcmdzIiwiZm4iLCJBcHBTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiQXN5bmNMb2NhbFN0b3JhZ2UiLCJtdWx0aUdldCIsInByb2Nlc3MiLCJuZXh0VGljayIsIm11bHRpU2V0IiwiZW50cmllcyIsIm11bHRpUmVtb3ZlIiwibXVsdGlNZXJnZSIsImNsZWFyIiwiZ2V0QWxsS2V5cyIsIkJ1aWxkSW5mbyIsImFwcFZlcnNpb24iLCJidWlsZFZlcnNpb24iLCJDbGlwYm9hcmQiLCJzZXRTdHJpbmciLCJEYXRhTWFuYWdlciIsInF1ZXJ5RGF0YSIsIkRldmljZUluZm8iLCJEaW1lbnNpb25zIiwid2luZG93IiwiZm9udFNjYWxlIiwiaGVpZ2h0Iiwic2NhbGUiLCJ3aWR0aCIsInNjcmVlbiIsIkZhY2Vib29rU0RLIiwibG9naW4iLCJsb2dvdXQiLCJxdWVyeUdyYXBoUGF0aCIsInBhdGgiLCJtZXRob2QiLCJwYXJhbXMiLCJGYlJlbGF5TmF0aXZlQWRhcHRlciIsInVwZGF0ZUNMQyIsIkdyYXBoUGhvdG9VcGxvYWQiLCJ1cGxvYWQiLCJJMThuIiwidHJhbnNsYXRpb25zRGljdGlvbmFyeSIsIkpTT04iLCJzdHJpbmdpZnkiLCJJbWFnZUxvYWRlciIsImdldFNpemUiLCJ1cmwiLCJyZXNvbHZlIiwicHJlZmV0Y2hJbWFnZSIsIkltYWdlVmlld01hbmFnZXIiLCJ1cmkiLCJzdWNjZXNzIiwiS2V5Ym9hcmRPYnNlcnZlciIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXJzIiwiTGlua2luZyIsIm9wZW5VUkwiLCJjYW5PcGVuVVJMIiwiZ2V0SW5pdGlhbFVSTCIsIkxvY2F0aW9uT2JzZXJ2ZXIiLCJnZXRDdXJyZW50UG9zaXRpb24iLCJzdGFydE9ic2VydmluZyIsInN0b3BPYnNlcnZpbmciLCJNb2RhbEZ1bGxzY3JlZW5WaWV3TWFuYWdlciIsIk5ldEluZm8iLCJmZXRjaCIsImdldENvbm5lY3Rpb25JbmZvIiwiaXNDb25uZWN0ZWQiLCJpc0Nvbm5lY3Rpb25FeHBlbnNpdmUiLCJOZXR3b3JraW5nIiwic2VuZFJlcXVlc3QiLCJhYm9ydFJlcXVlc3QiLCJQdXNoTm90aWZpY2F0aW9uTWFuYWdlciIsInByZXNlbnRMb2NhbE5vdGlmaWNhdGlvbiIsInNjaGVkdWxlTG9jYWxOb3RpZmljYXRpb24iLCJjYW5jZWxBbGxMb2NhbE5vdGlmaWNhdGlvbnMiLCJyZW1vdmVBbGxEZWxpdmVyZWROb3RpZmljYXRpb25zIiwiZ2V0RGVsaXZlcmVkTm90aWZpY2F0aW9ucyIsInJlbW92ZURlbGl2ZXJlZE5vdGlmaWNhdGlvbnMiLCJzZXRBcHBsaWNhdGlvbkljb25CYWRnZU51bWJlciIsImdldEFwcGxpY2F0aW9uSWNvbkJhZGdlTnVtYmVyIiwiY2FuY2VsTG9jYWxOb3RpZmljYXRpb25zIiwiZ2V0U2NoZWR1bGVkTG9jYWxOb3RpZmljYXRpb25zIiwicmVxdWVzdFBlcm1pc3Npb25zIiwiYWxlcnQiLCJiYWRnZSIsInNvdW5kIiwiYWJhbmRvblBlcm1pc3Npb25zIiwiY2hlY2tQZXJtaXNzaW9ucyIsImdldEluaXRpYWxOb3RpZmljYXRpb24iLCJTb3VyY2VDb2RlIiwic2NyaXB0VVJMIiwiU3RhdHVzQmFyTWFuYWdlciIsInNldENvbG9yIiwic2V0U3R5bGUiLCJzZXRIaWRkZW4iLCJzZXROZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlIiwic2V0QmFja2dyb3VuZENvbG9yIiwic2V0VHJhbnNsdWNlbnQiLCJUaW1pbmciLCJjcmVhdGVUaW1lciIsImRlbGV0ZVRpbWVyIiwiVUlNYW5hZ2VyIiwiQW5kcm9pZFZpZXdQYWdlciIsIkNvbW1hbmRzIiwic2V0UGFnZSIsInNldFBhZ2VXaXRob3V0QW5pbWF0aW9uIiwiYmx1ciIsImNyZWF0ZVZpZXciLCJkaXNwYXRjaFZpZXdNYW5hZ2VyQ29tbWFuZCIsImZvY3VzIiwic2V0Q2hpbGRyZW4iLCJtYW5hZ2VDaGlsZHJlbiIsInVwZGF0ZVZpZXciLCJyZW1vdmVTdWJ2aWV3c0Zyb21Db250YWluZXJXaXRoSUQiLCJyZXBsYWNlRXhpc3RpbmdOb25Sb290VmlldyIsImN1c3RvbUJ1YmJsaW5nRXZlbnRUeXBlcyIsImN1c3RvbURpcmVjdEV2ZW50VHlwZXMiLCJBbmRyb2lkVGV4dElucHV0IiwiTW9kYWxGdWxsc2NyZWVuVmlldyIsIkNvbnN0YW50cyIsIlNjcm9sbFZpZXciLCJWaWV3IiwiQmxvYk1vZHVsZSIsIkJMT0JfVVJJX1NDSEVNRSIsIkJMT0JfVVJJX0hPU1QiLCJlbmFibGVCbG9iU3VwcG9ydCIsImRpc2FibGVCbG9iU3VwcG9ydCIsImNyZWF0ZUZyb21QYXJ0cyIsInNlbmRCbG9iIiwicmVsZWFzZSIsIldlYlNvY2tldE1vZHVsZSIsImNvbm5lY3QiLCJzZW5kIiwic2VuZEJpbmFyeSIsInBpbmciLCJjbG9zZSIsIm1vZHVsZSIsImRvTW9jayIsInZpcnR1YWwiLCJyZWdpc3RlciIsImdldEJ5SUQiLCJSZWFjdCIsInZpZXdOYW1lIiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsInByb3BzIiwiY2hpbGRyZW4iXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUFNQTs7QUFvQkFBLEtBQ0dDLElBREgsQ0FDUSxlQURSLEVBRUdBLElBRkgsQ0FFUSxRQUZSLEUsQ0FJQTs7QUFHQUQsS0FDR0MsSUFESCxDQUNRLGdCQURSLEVBQzBCLE1BQU0sQ0FBRSxDQURsQyxFQUVHQSxJQUZILENBRVEsT0FGUixFQUVpQixNQUFNQyxjQUFjLE9BQWQsQ0FGdkIsRUFHR0QsSUFISCxDQUdRLE1BSFIsRUFHZ0IsTUFBTUMsY0FBYyxNQUFkLENBSHRCLEVBSUdELElBSkgsQ0FJUSxXQUpSLEVBSXFCLE1BQU1DLGNBQWMsV0FBZCxDQUozQixFQUtHRCxJQUxILENBS1EsT0FMUixFQUtpQixNQUFNQyxjQUFjLE9BQWQsQ0FMdkIsRUFNR0QsSUFOSCxDQU1RLE1BTlIsRUFNZ0IsTUFBTUMsY0FBYyxNQUFkLENBTnRCLEVBT0dELElBUEgsQ0FPUSxnQkFQUixFQU8wQixNQUFNRSxRQUFRQyxXQUFSLENBQW9CLG9CQUFwQixDQVBoQyxFQVFHSCxJQVJILENBUVEsWUFSUixFQVFzQixNQUFNRSxRQUFRQyxXQUFSLENBQW9CLGdCQUFwQixDQVI1QixFQVNHSCxJQVRILENBVUksbUJBVkosRUFXSSxNQUFNQyxjQUFjLG1CQUFkLENBWFYsRUFhR0QsSUFiSCxDQWFRLFVBYlIsRUFhb0IsTUFBTUUsUUFBUUMsV0FBUixDQUFvQixjQUFw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LEtBQUtpRCxFQUFMLEVBTFE7QUFNZnFELGlCQUFhdEcsS0FBS2lELEVBQUwsRUFORTtBQU9mc0QscUJBQWlCdkcsS0FBS2lELEVBQUw7QUFQRjtBQTlMTyxDQUExQjtBQXlNQXJDLE9BQU9DLElBQVAsQ0FBWWlDLGlCQUFaLEVBQStCaEMsT0FBL0IsQ0FBdUM0SyxVQUFVO0FBQy9DLE1BQUk7QUFDRjFMLFNBQUsyTCxNQUFMLENBQVlELE1BQVosRUFBb0IsTUFBTTVJLGtCQUFrQjRJLE1BQWxCLENBQTFCLEVBREUsQ0FDb0Q7QUFDdkQsR0FGRCxDQUVFLE9BQU94SyxDQUFQLEVBQVU7QUFDVmxCLFNBQUsyTCxNQUFMLENBQVlELE1BQVosRUFBb0IsTUFBTTVJLGtCQUFrQjRJLE1BQWxCLENBQTFCLEVBQXFEO0FBQUNFLGVBQVM7QUFBVixLQUFyRDtBQUNEO0FBQ0YsQ0FORDtBQVFBNUwsS0FDRzJMLE1BREgsQ0FDVSxlQURWLEVBQzJCLE1BQU03SSxpQkFEakMsRUFFRzZJLE1BRkgsQ0FFVSx5QkFGVixFQUVxQyxPQUFPO0FBQ3hDRSxZQUFVbkosTUFBTUEsRUFEd0I7QUFFeENvSixXQUFTLE1BQU1qSjtBQUZ5QixDQUFQLENBRnJDO0FBT0E3QyxLQUFLMkwsTUFBTCxDQUFZLHdCQUFaLEVBQXNDLE1BQU07QUFDMUMsUUFBTUksUUFBUTVMLFFBQVEsT0FBUixDQUFkOztBQUVBLFNBQU82TCxZQUFZLGNBQWNELE1BQU14SyxTQUFwQixDQUE4QjtBQUMvQzBLLGFBQVM7QUFDUCxhQUFPRixNQUFNRyxhQUFOLENBQ0xGLFFBREssRUFFTCxLQUFLRyxLQUZBLEVBR0wsS0FBS0EsS0FBTCxDQUFXQyxRQUhOLENBQVA7QUFLRDs7QUFQOEMsR0FBakQ7QUFTRCxDQVpEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBtb2NrQ29tcG9uZW50ID0gcmVxdWlyZS5yZXF1aXJlQWN0dWFsKCcuL21vY2tDb21wb25lbnQnKTtcblxucmVxdWlyZS5yZXF1aXJlQWN0dWFsKCcuLi9MaWJyYXJpZXMvcG9seWZpbGxzL2JhYmVsSGVscGVycy5qcycpO1xucmVxdWlyZS5yZXF1aXJlQWN0dWFsKCcuLi9MaWJyYXJpZXMvcG9seWZpbGxzL09iamVjdC5lczcuanMnKTtcbnJlcXVpcmUucmVxdWlyZUFjdHVhbCgnLi4vTGlicmFyaWVzL3BvbHlmaWxscy9lcnJvci1ndWFyZCcpO1xuXG5nbG9iYWwuX19ERVZfXyA9IHRydWU7XG5cbmdsb2JhbC5Qcm9taXNlID0gcmVxdWlyZS5yZXF1aXJlQWN0dWFsKCdwcm9taXNlJyk7XG5nbG9iYWwucmVnZW5lcmF0b3JSdW50aW1lID0gcmVxdWlyZS5yZXF1aXJlQWN0dWFsKCdyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUnKTtcblxuZ2xvYmFsLnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHJldHVybiBzZXRUaW1lb3V0KGNhbGxiYWNrLCAwKTtcbn07XG5nbG9iYWwuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihpZCkge1xuICBjbGVhclRpbWVvdXQoaWQpO1xufTtcblxuamVzdFxuICAubW9jaygnc2V0dXBEZXZ0b29scycpXG4gIC5tb2NrKCducG1sb2cnKTtcblxuLy8gdGhlcmUncyBhIF9fbW9ja19fIGZvciBpdC5cbmplc3Quc2V0TW9jaygnRXJyb3JVdGlscycsIHJlcXVpcmUoJ0Vycm9yVXRpbHMnKSk7XG5cbmplc3RcbiAgLm1vY2soJ0luaXRpYWxpemVDb3JlJywgKCkgPT4ge30pXG4gIC5tb2NrKCdJbWFnZScsICgpID0+IG1vY2tDb21wb25lbnQoJ0ltYWdlJykpXG4gIC5tb2NrKCdUZXh0JywgKCkgPT4gbW9ja0NvbXBvbmVudCgnVGV4dCcpKVxuICAubW9jaygnVGV4dElucHV0JywgKCkgPT4gbW9ja0NvbXBvbmVudCgnVGV4dElucHV0JykpXG4gIC5tb2NrKCdNb2RhbCcsICgpID0+IG1vY2tDb21wb25lbnQoJ01vZGFsJykpXG4gIC5tb2NrKCdWaWV3JywgKCkgPT4gbW9ja0NvbXBvbmVudCgnVmlldycpKVxuICAubW9jaygnUmVmcmVzaENvbnRyb2wnLCAoKSA9PiByZXF1aXJlLnJlcXVpcmVNb2NrKCdSZWZyZXNoQ29udHJvbE1vY2snKSlcbiAgLm1vY2soJ1Njcm9sbFZpZXcnLCAoKSA9PiByZXF1aXJlLnJlcXVpcmVNb2NrKCdTY3JvbGxWaWV3TW9jaycpKVxuICAubW9jayhcbiAgICAnQWN0aXZpdHlJbmRpY2F0b3InLFxuICAgICgpID0+IG1vY2tDb21wb25lbnQoJ0FjdGl2aXR5SW5kaWNhdG9yJyksXG4gIClcbiAgLm1vY2soJ0xpc3RWaWV3JywgKCkgPT4gcmVxdWlyZS5yZXF1aXJlTW9jaygnTGlzdFZpZXdNb2NrJykpXG4gIC5tb2NrKCdMaXN0Vmlld0RhdGFTb3VyY2UnLCAoKSA9PiB7XG4gICAgY29uc3QgRGF0YVNvdXJjZSA9IHJlcXVpcmUucmVxdWlyZUFjdHVhbCgnTGlzdFZpZXdEYXRhU291cmNlJyk7XG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBMaXN0Vmlld0RhdGFTb3VyY2UoZGF0YUJsb2IpIHtcbiAgICAgICAgdGhpcy5pdGVtcyA9IDA7XG4gICAgICAgIC8vIEVuc3VyZSB0aGlzIGRvZXNuJ3QgdGhyb3cuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgT2JqZWN0LmtleXMoZGF0YUJsb2IpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXRlbXMgKz0gZGF0YUJsb2Jba2V5XSAmJiAoXG4gICAgICAgICAgICAgIGRhdGFCbG9iW2tleV0ubGVuZ3RoIHx8IGRhdGFCbG9iW2tleV0uc2l6ZSB8fCAwXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgdGhpcy5pdGVtcyA9ICd1bmtub3duJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IExpc3RWaWV3RGF0YVNvdXJjZSh0aGlzLl9kYXRhQmxvYik7XG4gICAgfTtcbiAgICByZXR1cm4gRGF0YVNvdXJjZTtcbiAgfSlcbiAgLm1vY2soJ0FuaW1hdGVkSW1wbGVtZW50YXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgQW5pbWF0ZWRJbXBsZW1lbnRhdGlvbiA9IHJlcXVpcmUucmVxdWlyZUFjdHVhbCgnQW5pbWF0ZWRJbXBsZW1lbnRhdGlvbicpO1xuICAgIGNvbnN0IG9sZENyZWF0ZSA9IEFuaW1hdGVkSW1wbGVtZW50YXRpb24uY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQ7XG4gICAgQW5pbWF0ZWRJbXBsZW1lbnRhdGlvbi5jcmVhdGVBbmltYXRlZENvbXBvbmVudCA9IGZ1bmN0aW9uKENvbXBvbmVudCkge1xuICAgICAgY29uc3QgV3JhcHBlZCA9IG9sZENyZWF0ZShDb21wb25lbnQpO1xuICAgICAgV3JhcHBlZC5fX3NraXBTZXROYXRpdmVQcm9wc19GT1JfVEVTVFNfT05MWSA9IHRydWU7XG4gICAgICByZXR1cm4gV3JhcHBlZDtcbiAgICB9O1xuICAgIHJldHVybiBBbmltYXRlZEltcGxlbWVudGF0aW9uO1xuICB9KVxuICAubW9jaygnUmVhY3ROYXRpdmUnLCAoKSA9PiB7XG4gICAgY29uc3QgUmVhY3ROYXRpdmUgPSByZXF1aXJlLnJlcXVpcmVBY3R1YWwoJ1JlYWN0TmF0aXZlJyk7XG4gICAgY29uc3QgTmF0aXZlTWV0aG9kc01peGluID1cbiAgICAgIFJlYWN0TmF0aXZlLl9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVELk5hdGl2ZU1ldGhvZHNNaXhpbjtcblxuICAgIGNvbnN0IG1vY2tGdW5jdGlvbiA9IChrZXkpID0+IHtcbiAgICAgIGxldCB3YXJuZWQgPSBmYWxzZTtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHdhcm5lZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB3YXJuZWQgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgJ0NhbGxpbmcgLicgKyBrZXkgKyAnKCkgaW4gdGhlIHRlc3QgcmVuZGVyZXIgZW52aXJvbm1lbnQgaXMgbm90ICcgK1xuICAgICAgICAgICAgJ3N1cHBvcnRlZC4gSW5zdGVhZCwgbW9jayBvdXQgeW91ciBjb21wb25lbnRzIHRoYXQgdXNlICcgK1xuICAgICAgICAgICAgJ2ZpbmROb2RlSGFuZGxlIHdpdGggcmVwbGFjZW1lbnRzIHRoYXQgZG9uXFwndCByZWx5IG9uIHRoZSAnICtcbiAgICAgICAgICAgICduYXRpdmUgZW52aXJvbm1lbnQuJyxcbiAgICAgICAgKTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIFtcbiAgICAgICdtZWFzdXJlJyxcbiAgICAgICdtZWFzdXJlSW5XaW5kb3cnLFxuICAgICAgJ21lYXN1cmVMYXlvdXQnLFxuICAgICAgJ3NldE5hdGl2ZVByb3BzJyxcbiAgICAgICdmb2N1cycsXG4gICAgICAnYmx1cicsXG4gICAgXS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIE5hdGl2ZU1ldGhvZHNNaXhpbltrZXldID0gbW9ja0Z1bmN0aW9uKGtleSk7XG4gICAgICBSZWFjdE5hdGl2ZS5OYXRpdmVDb21wb25lbnQucHJvdG90eXBlW2tleV0gPSBtb2NrRnVuY3Rpb24oa2V5KTtcbiAgICB9KTtcbiAgICByZXR1cm4gUmVhY3ROYXRpdmU7XG4gIH0pXG4gIC5tb2NrKCdlbnN1cmVDb21wb25lbnRJc05hdGl2ZScsICgpID0+ICgpID0+IHRydWUpO1xuXG5jb25zdCBtb2NrRW1wdHlPYmplY3QgPSB7fTtcbmNvbnN0IG1vY2tOYXRpdmVNb2R1bGVzID0ge1xuICBBbGVydE1hbmFnZXI6IHtcbiAgICBhbGVydFdpdGhBcmdzOiBqZXN0LmZuKCksXG4gIH0sXG4gIEFwcFN0YXRlOiB7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgfSxcbiAgQXN5bmNMb2NhbFN0b3JhZ2U6IHtcbiAgICBtdWx0aUdldDogamVzdC5mbigoa2V5cywgY2FsbGJhY2spID0+IHByb2Nlc3MubmV4dFRpY2soKCkgPT4gY2FsbGJhY2sobnVsbCwgW10pKSksXG4gICAgbXVsdGlTZXQ6IGplc3QuZm4oKGVudHJpZXMsIGNhbGxiYWNrKSA9PiBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKG51bGwpKSksXG4gICAgbXVsdGlSZW1vdmU6IGplc3QuZm4oKGtleXMsIGNhbGxiYWNrKSA9PiBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKG51bGwpKSksXG4gICAgbXVsdGlNZXJnZTogamVzdC5mbigoZW50cmllcywgY2FsbGJhY2spID0+IHByb2Nlc3MubmV4dFRpY2soKCkgPT4gY2FsbGJhY2sobnVsbCkpKSxcbiAgICBjbGVhcjogamVzdC5mbihjYWxsYmFjayA9PiBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKG51bGwpKSksXG4gICAgZ2V0QWxsS2V5czogamVzdC5mbihjYWxsYmFjayA9PiBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKG51bGwsIFtdKSkpLFxuICB9LFxuICBCdWlsZEluZm86IHtcbiAgICBhcHBWZXJzaW9uOiAnMCcsXG4gICAgYnVpbGRWZXJzaW9uOiAnMCcsXG4gIH0sXG4gIENsaXBib2FyZDoge1xuICAgIHNldFN0cmluZzogamVzdC5mbigpLFxuICB9LFxuICBEYXRhTWFuYWdlcjoge1xuICAgIHF1ZXJ5RGF0YTogamVzdC5mbigpLFxuICB9LFxuICBEZXZpY2VJbmZvOiB7XG4gICAgRGltZW5zaW9uczoge1xuICAgICAgd2luZG93OiB7XG4gICAgICAgIGZvbnRTY2FsZTogMixcbiAgICAgICAgaGVpZ2h0OiAxMzM0LFxuICAgICAgICBzY2FsZTogMixcbiAgICAgICAgd2lkdGg6IDc1MCxcbiAgICAgIH0sXG4gICAgICBzY3JlZW46IHtcbiAgICAgICAgZm9udFNjYWxlOiAyLFxuICAgICAgICBoZWlnaHQ6IDEzMzQsXG4gICAgICAgIHNjYWxlOiAyLFxuICAgICAgICB3aWR0aDogNzUwLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICBGYWNlYm9va1NESzoge1xuICAgIGxvZ2luOiBqZXN0LmZuKCksXG4gICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgcXVlcnlHcmFwaFBhdGg6IGplc3QuZm4oKHBhdGgsIG1ldGhvZCwgcGFyYW1zLCBjYWxsYmFjaykgPT4gY2FsbGJhY2soKSksXG4gIH0sXG4gIEZiUmVsYXlOYXRpdmVBZGFwdGVyOiB7XG4gICAgdXBkYXRlQ0xDOiBqZXN0LmZuKCksXG4gIH0sXG4gIEdyYXBoUGhvdG9VcGxvYWQ6IHtcbiAgICB1cGxvYWQ6IGplc3QuZm4oKSxcbiAgfSxcbiAgSTE4bjoge1xuICAgIHRyYW5zbGF0aW9uc0RpY3Rpb25hcnk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICdHb29kIGJ5ZSwge25hbWV9IXxCeWUgbWVzc2FnZSc6ICdcXHV7MDBBMX1BZGlcXHV7MDBGM31zIHtuYW1lfSEnLFxuICAgIH0pLFxuICB9LFxuICBJbWFnZUxvYWRlcjoge1xuICAgIGdldFNpemU6IGplc3QuZm4oXG4gICAgICAodXJsKSA9PiBQcm9taXNlLnJlc29sdmUoe3dpZHRoOiAzMjAsIGhlaWdodDogMjQwfSlcbiAgICApLFxuICAgIHByZWZldGNoSW1hZ2U6IGplc3QuZm4oKSxcbiAgfSxcbiAgSW1hZ2VWaWV3TWFuYWdlcjoge1xuICAgIGdldFNpemU6IGplc3QuZm4oXG4gICAgICAodXJpLCBzdWNjZXNzKSA9PiBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHN1Y2Nlc3MoMzIwLCAyNDApKVxuICAgICksXG4gICAgcHJlZmV0Y2hJbWFnZTogamVzdC5mbigpLFxuICB9LFxuICBLZXlib2FyZE9ic2VydmVyOiB7XG4gICAgYWRkTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICByZW1vdmVMaXN0ZW5lcnM6IGplc3QuZm4oKSxcbiAgfSxcbiAgTGlua2luZzoge1xuICAgIG9wZW5VUkw6IGplc3QuZm4oKSxcbiAgICBjYW5PcGVuVVJMOiBqZXN0LmZuKFxuICAgICAgKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpXG4gICAgKSxcbiAgICBhZGRFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgZ2V0SW5pdGlhbFVSTDogamVzdC5mbihcbiAgICAgICgpID0+IFByb21pc2UucmVzb2x2ZSgpXG4gICAgKSxcbiAgICByZW1vdmVFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gIH0sXG4gIExvY2F0aW9uT2JzZXJ2ZXI6IHtcbiAgICBnZXRDdXJyZW50UG9zaXRpb246IGplc3QuZm4oKSxcbiAgICBzdGFydE9ic2VydmluZzogamVzdC5mbigpLFxuICAgIHN0b3BPYnNlcnZpbmc6IGplc3QuZm4oKSxcbiAgfSxcbiAgTW9kYWxGdWxsc2NyZWVuVmlld01hbmFnZXI6IHt9LFxuICBOZXRJbmZvOiB7XG4gICAgZmV0Y2g6IGplc3QuZm4oXG4gICAgICAoKSA9PiBQcm9taXNlLnJlc29sdmUoKVxuICAgICksXG4gICAgZ2V0Q29ubmVjdGlvbkluZm86IGplc3QuZm4oXG4gICAgICAoKSA9PiBQcm9taXNlLnJlc29sdmUoKVxuICAgICksXG4gICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICBpc0Nvbm5lY3RlZDoge1xuICAgICAgZmV0Y2g6IGplc3QuZm4oXG4gICAgICAgICgpID0+IFByb21pc2UucmVzb2x2ZSgpXG4gICAgICApLFxuICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIH0sXG4gICAgaXNDb25uZWN0aW9uRXhwZW5zaXZlOiBqZXN0LmZuKFxuICAgICAgKCkgPT4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICApLFxuICB9LFxuICBOZXR3b3JraW5nOiB7XG4gICAgc2VuZFJlcXVlc3Q6IGplc3QuZm4oKSxcbiAgICBhYm9ydFJlcXVlc3Q6IGplc3QuZm4oKSxcbiAgICBhZGRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIHJlbW92ZUxpc3RlbmVyczogamVzdC5mbigpLFxuICB9LFxuICBQdXNoTm90aWZpY2F0aW9uTWFuYWdlcjoge1xuICAgIHByZXNlbnRMb2NhbE5vdGlmaWNhdGlvbjogamVzdC5mbigpLFxuICAgIHNjaGVkdWxlTG9jYWxOb3RpZmljYXRpb246IGplc3QuZm4oKSxcbiAgICBjYW5jZWxBbGxMb2NhbE5vdGlmaWNhdGlvbnM6IGplc3QuZm4oKSxcbiAgICByZW1vdmVBbGxEZWxpdmVyZWROb3RpZmljYXRpb25zOiBqZXN0LmZuKCksXG4gICAgZ2V0RGVsaXZlcmVkTm90aWZpY2F0aW9uczogamVzdC5mbihjYWxsYmFjayA9PiBwcm9jZXNzLm5leHRUaWNrKCgpID0+IFtdKSksXG4gICAgcmVtb3ZlRGVsaXZlcmVkTm90aWZpY2F0aW9uczogamVzdC5mbigpLFxuICAgIHNldEFwcGxpY2F0aW9uSWNvbkJhZGdlTnVtYmVyOiBqZXN0LmZuKCksXG4gICAgZ2V0QXBwbGljYXRpb25JY29uQmFkZ2VOdW1iZXI6IGplc3QuZm4oY2FsbGJhY2sgPT4gcHJvY2Vzcy5uZXh0VGljaygoKSA9PiBjYWxsYmFjaygwKSkpLFxuICAgIGNhbmNlbExvY2FsTm90aWZpY2F0aW9uczogamVzdC5mbigpLFxuICAgIGdldFNjaGVkdWxlZExvY2FsTm90aWZpY2F0aW9uczogamVzdC5mbihjYWxsYmFjayA9PiBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKCkpKSxcbiAgICByZXF1ZXN0UGVybWlzc2lvbnM6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHthbGVydDogdHJ1ZSwgYmFkZ2U6IHRydWUsIHNvdW5kOiB0cnVlfSkpLFxuICAgIGFiYW5kb25QZXJtaXNzaW9uczogamVzdC5mbigpLFxuICAgIGNoZWNrUGVybWlzc2lvbnM6IGplc3QuZm4oY2FsbGJhY2sgPT4gcHJvY2Vzcy5uZXh0VGljaygoKSA9PiBjYWxsYmFjayh7YWxlcnQ6IHRydWUsIGJhZGdlOiB0cnVlLCBzb3VuZDogdHJ1ZX0pKSksXG4gICAgZ2V0SW5pdGlhbE5vdGlmaWNhdGlvbjogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCkpLFxuICAgIGFkZExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgcmVtb3ZlTGlzdGVuZXJzOiBqZXN0LmZuKCksXG4gIH0sXG4gIFNvdXJjZUNvZGU6IHtcbiAgICBzY3JpcHRVUkw6IG51bGwsXG4gIH0sXG4gIFN0YXR1c0Jhck1hbmFnZXI6IHtcbiAgICBzZXRDb2xvcjogamVzdC5mbigpLFxuICAgIHNldFN0eWxlOiBqZXN0LmZuKCksXG4gICAgc2V0SGlkZGVuOiBqZXN0LmZuKCksXG4gICAgc2V0TmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZTogamVzdC5mbigpLFxuICAgIHNldEJhY2tncm91bmRDb2xvcjogamVzdC5mbigpLFxuICAgIHNldFRyYW5zbHVjZW50OiBqZXN0LmZuKCksXG4gIH0sXG4gIFRpbWluZzoge1xuICAgIGNyZWF0ZVRpbWVyOiBqZXN0LmZuKCksXG4gICAgZGVsZXRlVGltZXI6IGplc3QuZm4oKSxcbiAgfSxcbiAgVUlNYW5hZ2VyOiB7XG4gICAgQW5kcm9pZFZpZXdQYWdlcjoge1xuICAgICAgQ29tbWFuZHM6IHtcbiAgICAgICAgc2V0UGFnZTogamVzdC5mbigpLFxuICAgICAgICBzZXRQYWdlV2l0aG91dEFuaW1hdGlvbjogamVzdC5mbigpLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGJsdXI6IGplc3QuZm4oKSxcbiAgICBjcmVhdGVWaWV3OiBqZXN0LmZuKCksXG4gICAgZGlzcGF0Y2hWaWV3TWFuYWdlckNvbW1hbmQ6IGplc3QuZm4oKSxcbiAgICBmb2N1czogamVzdC5mbigpLFxuICAgIHNldENoaWxkcmVuOiBqZXN0LmZuKCksXG4gICAgbWFuYWdlQ2hpbGRyZW46IGplc3QuZm4oKSxcbiAgICB1cGRhdGVWaWV3OiBqZXN0LmZuKCksXG4gICAgcmVtb3ZlU3Vidmlld3NGcm9tQ29udGFpbmVyV2l0aElEOiBqZXN0LmZuKCksXG4gICAgcmVwbGFjZUV4aXN0aW5nTm9uUm9vdFZpZXc6IGplc3QuZm4oKSxcbiAgICBjdXN0b21CdWJibGluZ0V2ZW50VHlwZXM6IHt9LFxuICAgIGN1c3RvbURpcmVjdEV2ZW50VHlwZXM6IHt9LFxuICAgIEFuZHJvaWRUZXh0SW5wdXQ6IHtcbiAgICAgIENvbW1hbmRzOiB7fSxcbiAgICB9LFxuICAgIE1vZGFsRnVsbHNjcmVlblZpZXc6IHtcbiAgICAgIENvbnN0YW50czoge30sXG4gICAgfSxcbiAgICBTY3JvbGxWaWV3OiB7XG4gICAgICBDb25zdGFudHM6IHt9LFxuICAgIH0sXG4gICAgVmlldzoge1xuICAgICAgQ29uc3RhbnRzOiB7fSxcbiAgICB9LFxuICB9LFxuICBCbG9iTW9kdWxlOiB7XG4gICAgQkxPQl9VUklfU0NIRU1FOiAnY29udGVudCcsXG4gICAgQkxPQl9VUklfSE9TVDogbnVsbCxcbiAgICBlbmFibGVCbG9iU3VwcG9ydDogamVzdC5mbigpLFxuICAgIGRpc2FibGVCbG9iU3VwcG9ydDogamVzdC5mbigpLFxuICAgIGNyZWF0ZUZyb21QYXJ0czogamVzdC5mbigpLFxuICAgIHNlbmRCbG9iOiBqZXN0LmZuKCksXG4gICAgcmVsZWFzZTogamVzdC5mbigpLFxuICB9LFxuICBXZWJTb2NrZXRNb2R1bGU6IHtcbiAgICBjb25uZWN0OiBqZXN0LmZuKCksXG4gICAgc2VuZDogamVzdC5mbigpLFxuICAgIHNlbmRCaW5hcnk6IGplc3QuZm4oKSxcbiAgICBwaW5nOiBqZXN0LmZuKCksXG4gICAgY2xvc2U6IGplc3QuZm4oKSxcbiAgICBhZGRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIHJlbW92ZUxpc3RlbmVyczogamVzdC5mbigpLFxuICB9LFxufTtcblxuT2JqZWN0LmtleXMobW9ja05hdGl2ZU1vZHVsZXMpLmZvckVhY2gobW9kdWxlID0+IHtcbiAgdHJ5IHtcbiAgICBqZXN0LmRvTW9jayhtb2R1bGUsICgpID0+IG1vY2tOYXRpdmVNb2R1bGVzW21vZHVsZV0pOyAvLyBuZWVkZWQgYnkgRmFjZWJvb2tTREstdGVzdFxuICB9IGNhdGNoIChlKSB7XG4gICAgamVzdC5kb01vY2sobW9kdWxlLCAoKSA9PiBtb2NrTmF0aXZlTW9kdWxlc1ttb2R1bGVdLCB7dmlydHVhbDogdHJ1ZX0pO1xuICB9XG59KTtcblxuamVzdFxuICAuZG9Nb2NrKCdOYXRpdmVNb2R1bGVzJywgKCkgPT4gbW9ja05hdGl2ZU1vZHVsZXMpXG4gIC5kb01vY2soJ1JlYWN0TmF0aXZlUHJvcFJlZ2lzdHJ5JywgKCkgPT4gKHtcbiAgICByZWdpc3RlcjogaWQgPT4gaWQsXG4gICAgZ2V0QnlJRDogKCkgPT4gbW9ja0VtcHR5T2JqZWN0LFxuICB9KSk7XG5cbmplc3QuZG9Nb2NrKCdyZXF1aXJlTmF0aXZlQ29tcG9uZW50JywgKCkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbiAgcmV0dXJuIHZpZXdOYW1lID0+IGNsYXNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgdmlld05hbWUsXG4gICAgICAgIHRoaXMucHJvcHMsXG4gICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW4sXG4gICAgICApO1xuICAgIH1cbiAgfTtcbn0pO1xuIl19